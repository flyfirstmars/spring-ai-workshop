spring:
  application:
    name: spring-ai-workshop
  main:
    web-application-type: servlet
  jmx:
    enabled: false
  shell:
    interactive:
      enabled: true
    noninteractive:
      enabled: false
  # Session 3: PostgreSQL datasource for chat memory persistence
  datasource:
    url: jdbc:postgresql://localhost:5435/voyagermate
    username: postgres
    password: postgres
    hikari:
      maximum-pool-size: 5
      minimum-idle: 2
  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true
  ai:
    azure:
      openai:
        endpoint: ${DIAL_API_ENDPOINT}
        api-key: ${DIAL_API_KEY}
        chat:
          options:
            deployment-name: ${DIAL_API_OPENAI_DEPLOYMENT:gpt-4o}
            temperature: 1.0
        audio:
          transcription:
            options:
              deployment-name: ${DIAL_API_OPENAI_DEPLOYMENT:whisper-1}
              response-format: text
    # Disable Spring AI's auto-schema initialization (we use Flyway)
    chat:
      memory:
        jdbc:
          initialize-schema: never
    retry:
      max-attempts: 3
      backoff:
        initial-interval: 1s
        multiplier: 2
        max-interval: 10s
  threads:
    virtual:
      enabled: true
logging:
  level:
    org.springframework.ai: DEBUG
    org.springframework.web.client: DEBUG
    # Suppress RMI warnings
    '[sun.rmi.transport.tcp]': ERROR
    # Suppress JLine native warnings
    '[org.jline]': WARN
    # Suppress Netty version mismatch info
    '[com.azure.core.http.netty.implementation.NettyUtility]': WARN
    # Suppress Azure SDK Netty version warnings
    '[com.azure]': WARN

# VoyagerMate configuration
voyagermate:
  chat:
    memory:
      # Maximum messages to retain in sliding window (default: 20)
      window-size: ${CHAT_MEMORY_WINDOW_SIZE:20}
  etl:
    # Document chunking settings for ETL pipeline
    chunk-size: ${ETL_CHUNK_SIZE:800}
    chunk-overlap: ${ETL_CHUNK_OVERLAP:100}
